"use strict";(self["webpackChunkprofile"]=self["webpackChunkprofile"]||[]).push([[217],{8053:function(e,a,n){n.d(a,{Z:function(){return D}});var o=n(3396);const t={class:"content"},l=(0,o.Uk)("下载"),i=(0,o.Uk)("删除");function s(e,a,n,s,r,c){const u=(0,o.up)("el-table-column"),d=(0,o.up)("MoreFilled"),g=(0,o.up)("el-icon"),p=(0,o.up)("el-dropdown-item"),m=(0,o.up)("el-dropdown-menu"),w=(0,o.up)("el-dropdown"),f=(0,o.up)("el-table");return(0,o.wg)(),(0,o.iD)("div",t,[(0,o.Wm)(f,{"highlight-current-row":"",data:e.dataList,onRowClick:e.handleClick},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{prop:"songName",label:"歌曲"}),(0,o.Wm)(u,{prop:"singerName",label:"歌手"}),(0,o.Wm)(u,{prop:"introduction",label:"专辑"}),(0,o.Wm)(u,{label:"编辑",width:"80",align:"center"},{default:(0,o.w5)((a=>[(0,o.Wm)(w,null,{dropdown:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{icon:e.Download,onClick:n=>e.downloadMusic({songUrl:a.row.url,songName:a.row.name})},{default:(0,o.w5)((()=>[l])),_:2},1032,["icon","onClick"]),e.show?((0,o.wg)(),(0,o.j4)(p,{key:0,icon:e.Delete,onClick:n=>e.deleteCollection({id:a.row.id})},{default:(0,o.w5)((()=>[i])),_:2},1032,["icon","onClick"])):(0,o.kq)("",!0)])),_:2},1024)])),default:(0,o.w5)((()=>[(0,o.Wm)(g,{onClick:n=>e.handleEdit(a.row)},{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data","onRowClick"])])}var r=n(4870),c=n(9749),u=n(8045),d=n(9092),g=n(547),p=n(6854);const m=(0,o.aZ)({name:"Download"}),w={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},f=(0,o._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 110 64H160a32 32 0 110-64zm384-253.696l236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),h=[f];function v(e,a,n,t,l,i){return(0,o.wg)(),(0,o.iD)("svg",w,h)}var _=(0,p.Z)(m,[["render",v]]),C=n(2167),k=n(5478),b=(0,o.aZ)({components:{MoreFilled:d.Z},props:{songList:Array,show:{default:!1}},emits:["changeData"],setup(e){const{getSongTitle:a,getSingerName:n,playMusic:t,checkStatus:l,downloadMusic:i}=(0,u.Z)(),{proxy:s}=(0,o.FN)(),d=(0,c.oR)(),{songList:p}=(0,r.BK)(e),m=(0,r.qj)({dislike:k.JO.Dislike,like:k.JO.Like}),w=(0,o.Fl)((()=>d.getters.songUrl)),f=(0,o.Fl)((()=>d.getters.singerName)),h=(0,o.Fl)((()=>d.getters.songTitle)),v=(0,o.Fl)((()=>{const e=[];return p.value.forEach(((o,t)=>{o["songName"]=a(o.name),o["singerName"]=n(o.name),o["index"]=t,e.push(o)})),e}));function b(e){t({id:e.id,url:e.url,pic:e.pic,index:e.index,name:e.name,lyric:e.lyric,currentSongList:p.value})}function x(e){console.log("row",e)}const U=(0,o.Fl)((()=>d.getters.userId));async function D({id:e}){if(!l())return;const a=await C.x.deleteCollection(U.value,e);s.$message({message:a.message,type:a.type}),!1===a.data&&s.$emit("changeData",a.data)}return{dataList:v,iconList:m,Delete:g.Z,Download:_,songUrl:w,singerName:f,songTitle:h,handleClick:b,handleEdit:x,downloadMusic:i,deleteCollection:D}}}),x=n(89);const U=(0,x.Z)(b,[["render",s],["__scopeId","data-v-fd83827a"]]);var D=U},9217:function(e,a,n){n.r(a),n.d(a,{default:function(){return B}});var o=n(3396),t=n(7139);const l={class:"personal"},i={class:"personal-info"},s={class:"personal-msg"},r={class:"username"},c={class:"introduction"},u=(0,o.Uk)("修改个人信息"),d={class:"personal-body"};function g(e,a,n,g,p,m){const w=(0,o.up)("el-image"),f=(0,o.up)("el-button"),h=(0,o.up)("song-list"),v=(0,o.up)("upload"),_=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o._)("div",i,[(0,o.Wm)(w,{class:"personal-img",fit:"contain",src:e.attachImageUrl(e.userPic),onClick:a[0]||(a[0]=a=>e.dialogTableVisible=!0)},null,8,["src"]),(0,o._)("div",s,[(0,o._)("div",r,(0,t.zw)(e.personalInfo.username),1),(0,o._)("div",c,(0,t.zw)(e.personalInfo.introduction),1)]),(0,o.Wm)(f,{class:"edit-info",round:"",icon:e.Edit,onClick:a[1]||(a[1]=a=>e.goPage())},{default:(0,o.w5)((()=>[u])),_:1},8,["icon"])]),(0,o._)("div",d,[(0,o.Wm)(h,{songList:e.collectSongList,show:!0,onChangeData:e.changeData},null,8,["songList","onChangeData"])]),(0,o.Wm)(_,{modelValue:e.dialogTableVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogTableVisible=a),title:"修改头像"},{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1},8,["modelValue"])])}var p=n(4870),m=n(9749),w=n(6854);const f=(0,o.aZ)({name:"Edit"}),h={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},v=(0,o._)("path",{fill:"currentColor",d:"M832 512a32 32 0 1164 0v352a32 32 0 01-32 32H160a32 32 0 01-32-32V160a32 32 0 0132-32h352a32 32 0 010 64H192v640h640V512z"},null,-1),_=(0,o._)("path",{fill:"currentColor",d:"M469.952 554.24l52.8-7.552L847.104 222.4a32 32 0 10-45.248-45.248L477.44 501.44l-7.552 52.8zm422.4-422.4a96 96 0 010 135.808l-331.84 331.84a32 32 0 01-18.112 9.088L436.8 623.68a32 32 0 01-36.224-36.224l15.104-105.6a32 32 0 019.024-18.112l331.904-331.84a96 96 0 01135.744 0z"},null,-1),C=[v,_];function k(e,a,n,t,l,i){return(0,o.wg)(),(0,o.iD)("svg",h,C)}var b=(0,w.Z)(f,[["render",k]]),x=n(8053);const U=e=>((0,o.dD)("data-v-1260fc69"),e=e(),(0,o.Cn)(),e),D={class:"upload"},y=U((()=>(0,o._)("div",{class:"el-upload__text"},"将文件拖到此处或点击上传",-1))),L={class:"el-upload__tip"};function W(e,a,n,l,i,s){const r=(0,o.up)("upload-filled"),c=(0,o.up)("el-icon"),u=(0,o.up)("el-upload");return(0,o.wg)(),(0,o.iD)("div",D,[(0,o.Wm)(u,{drag:"",action:e.uploadUrl(),"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload},{tip:(0,o.w5)((()=>[(0,o._)("p",L,"只能上传 "+(0,t.zw)(e.uploadTypes.join("、"))+" 文件, 且不超过10M",1)])),default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"el-icon--upload"},{default:(0,o.w5)((()=>[(0,o.Wm)(r)])),_:1}),y])),_:1},8,["action","on-success","before-upload"])])}const Z=(0,o.aZ)({name:"UploadFilled"}),I={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},F=(0,o._)("path",{fill:"currentColor",d:"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0164 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 01512 192a239.872 239.872 0 01235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 01-240 240c-5.376 0-10.56-1.28-16-1.6v1.6H544z"},null,-1),S=[F];function M(e,a,n,t,l,i){return(0,o.wg)(),(0,o.iD)("svg",I,S)}var V=(0,w.Z)(Z,[["render",M]]),z=n(2167),N=(0,o.aZ)({components:{UploadFilled:V},setup(){const{proxy:e}=(0,o.FN)(),a=(0,m.oR)(),n=(0,p.iH)(["jpg","jpeg","png","gif"]),t=(0,o.Fl)((()=>a.getters.userId));function l(){return z.x.uploadUrl(t.value)}function i(a){const o=2,t=a.size/1024/1024,l=n.value.includes(a.type.replace(/image\//,""));return(t>o||t<=0)&&e.$message.error(`图片大小范围是 0~${o}MB!`),l||e.$message.error(`图片只支持 ${n.value.join("、")} 格式!`),t&&l}function s(a,n){e.$message({message:a.message,type:a.type}),a.success&&e.$store.commit("setUserPic",a.data)}return{uploadTypes:n,uploadUrl:l,beforeAvatarUpload:i,handleAvatarSuccess:s}}}),T=n(89);const H=(0,T.Z)(N,[["render",W],["__scopeId","data-v-1260fc69"]]);var $=H,j=n(8045),A=n(5478),P=(0,o.aZ)({components:{SongList:x.Z,Upload:$},setup(){const e=(0,m.oR)(),{routerManager:a}=(0,j.Z)(),n=(0,p.iH)(!1),t=(0,p.iH)([]),l=(0,p.qj)({username:"",userSex:"",birth:"",location:"",introduction:""}),i=(0,o.Fl)((()=>e.getters.userId)),s=(0,o.Fl)((()=>e.getters.userPic));function r(){a(A.wC.Setting,{path:A.wC.Setting})}async function c(e){const a=await z.x.getUserOfId(e);l.username=a.data[0].username,l.userSex=a.data[0].sex,l.birth=a.data[0].birth,l.introduction=a.data[0].introduction,l.location=a.data[0].location}async function u(e){t.value=[];const a=await z.x.getCollectionOfUser(e),n=a.data||[];for(const o of n){const e=await z.x.getSongOfId(o.songId);t.value.push(e.data[0])}}function d(){u(i.value)}return(0,o.YP)(s,(()=>{n.value=!1})),(0,o.Y3)((()=>{c(i.value),u(i.value)})),{Edit:b,userPic:s,dialogTableVisible:n,collectSongList:t,personalInfo:l,attachImageUrl:z.x.attachImageUrl,goPage:r,changeData:d}}});const E=(0,T.Z)(P,[["render",g],["__scopeId","data-v-e0760d08"]]);var B=E}}]);
//# sourceMappingURL=217.ce3b8e75.js.map