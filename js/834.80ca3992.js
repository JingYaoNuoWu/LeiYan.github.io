"use strict";(self["webpackChunkmusic_client"]=self["webpackChunkmusic_client"]||[]).push([[834],{3089:function(e,n,r){r.d(n,{Z:function(){return c}});var o=r(3396);const s={class:"icon","aria-hidden":"true"},a=["xlink:href"];function t(e,n,r,t,i,u){return(0,o.wg)(),(0,o.iD)("svg",s,[(0,o._)("use",{"xlink:href":e.icon},null,8,a)])}var i=(0,o.aZ)({props:{icon:String}}),u=r(89);const l=(0,u.Z)(i,[["render",t]]);var c=l},6721:function(e,n,r){r.d(n,{Z:function(){return d}});var o=r(3396);const s={class:"login-logo"};function a(e,n,r,a,t,i){const u=(0,o.up)("yin-icon");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(u,{icon:e.icon},null,8,["icon"])])}var t=r(3089),i=r(5478),u=(0,o.aZ)({components:{YinIcon:t.Z},data(){return{icon:i.JO.ERJI}}}),l=r(89);const c=(0,l.Z)(u,[["render",a],["__scopeId","data-v-4521b52c"]]);var d=c},4834:function(e,n,r){r.r(n),r.d(n,{default:function(){return _}});var o=r(3396),s=r(9242);const a=e=>((0,o.dD)("data-v-2b79db2a"),e=e(),(0,o.Cn)(),e),t={class:"sign"},i=a((()=>(0,o._)("div",{class:"sign-head"},[(0,o._)("span",null,"帐号登录")],-1))),u=(0,o.Uk)("注册"),l=(0,o.Uk)("登录");function c(e,n,r,a,c,d){const m=(0,o.up)("yin-login-logo"),p=(0,o.up)("el-input"),g=(0,o.up)("el-form-item"),f=(0,o.up)("el-button"),w=(0,o.up)("el-form");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(m),(0,o._)("div",t,[i,(0,o.Wm)(w,{ref:"signInForm","status-icon":"",model:e.registerForm,rules:e.SignInRules},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{placeholder:"用户名",modelValue:e.registerForm.username,"onUpdate:modelValue":n[0]||(n[0]=n=>e.registerForm.username=n)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(g,{prop:"password"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{type:"password",placeholder:"密码",modelValue:e.registerForm.password,"onUpdate:modelValue":n[1]||(n[1]=n=>e.registerForm.password=n),onKeyup:(0,s.D2)(e.handleLoginIn,["enter"])},null,8,["modelValue","onKeyup"])])),_:1}),(0,o.Wm)(g,{class:"sign-btn"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:e.handleSignUp},{default:(0,o.w5)((()=>[u])),_:1},8,["onClick"]),(0,o.Wm)(f,{type:"primary",onClick:e.handleLoginIn},{default:(0,o.w5)((()=>[l])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])],64)}var d=r(4870),m=r(8045),p=r(6721),g=r(2167),f=r(5478),w=(0,o.aZ)({components:{YinLoginLogo:p.Z},setup(){const{proxy:e}=(0,o.FN)(),{routerManager:n,changeIndex:r}=(0,m.Z)(),s=(0,d.qj)({username:"",password:""});async function a(){let o=!0;if(e.$refs["signInForm"].validate((e=>{if(!e)return o=!1})),!o)return;const a=new URLSearchParams;a.append("username",s.username),a.append("password",s.password);try{const o=await g.x.signIn(a);e.$message({message:o.message,type:o.type}),o.success&&(e.$store.commit("setUserId",o.data[0].id),e.$store.commit("setUsername",o.data[0].username),e.$store.commit("setUserPic",o.data[0].avator),e.$store.commit("setToken",!0),r(f.ZF.Home),n(f.wC.Home,{path:f.wC.Home}))}catch(t){console.error(t)}}function t(){n(f.wC.SignUp,{path:f.wC.SignUp})}return{registerForm:s,SignInRules:f.Jj,handleLoginIn:a,handleSignUp:t}}}),h=r(89);const v=(0,h.Z)(w,[["render",c],["__scopeId","data-v-2b79db2a"]]);var _=v}}]);
//# sourceMappingURL=834.80ca3992.js.map