"use strict";(self["webpackChunkmusic_client"]=self["webpackChunkmusic_client"]||[]).push([[929],{2024:function(e,t,n){function l(e){if(null==e||""==e)return"";const t=new Date(e),n=t.getFullYear(),l=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate();return n+"-"+l+"-"+o}function o(e){if(null==e||""==e)return"";const t=new Date(e),n=t.getFullYear(),l=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),a=t.getHours()<10?"0"+t.getHours():t.getHours(),i=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return n+"-"+l+"-"+o+" "+a+":"+i+":"+s}function a(e){let t=e.split("\n");const n=/\[\d{2}:\d{2}.(\d{3}|\d{2})\]/g,l=[];if(!/\[.+\]/.test(e))return[[0,e]];while(!n.test(t[0]))t=t.slice(1);0===t[t.length-1].length&&t.pop();for(const o of t){const e=o.match(n),t=o.replace(n,"");for(const n of e){const e=n.slice(1,-1).split(":");""!==t&&l.push([60*parseInt(e[0],10)+parseFloat(e[1]),t])}}return l.sort(((e,t)=>e[0]-t[0])),l}n.d(t,{oy:function(){return l},p6:function(){return o},zu:function(){return a}})},8053:function(e,t,n){n.d(t,{Z:function(){return x}});var l=n(3396);const o={class:"content"},a=(0,l.Uk)("下载"),i=(0,l.Uk)("删除");function s(e,t,n,s,r,c){const u=(0,l.up)("el-table-column"),g=(0,l.up)("MoreFilled"),d=(0,l.up)("el-icon"),w=(0,l.up)("el-dropdown-item"),m=(0,l.up)("el-dropdown-menu"),p=(0,l.up)("el-dropdown"),f=(0,l.up)("el-table");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(f,{"highlight-current-row":"",data:e.dataList,onRowClick:e.handleClick},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{prop:"songName",label:"歌曲"}),(0,l.Wm)(u,{prop:"singerName",label:"歌手"}),(0,l.Wm)(u,{prop:"introduction",label:"专辑"}),(0,l.Wm)(u,{label:"编辑",width:"80",align:"center"},{default:(0,l.w5)((t=>[(0,l.Wm)(p,null,{dropdown:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,{icon:e.Download,onClick:n=>e.downloadMusic({songUrl:t.row.url,songName:t.row.name})},{default:(0,l.w5)((()=>[a])),_:2},1032,["icon","onClick"]),e.show?((0,l.wg)(),(0,l.j4)(w,{key:0,icon:e.Delete,onClick:n=>e.deleteCollection({id:t.row.id})},{default:(0,l.w5)((()=>[i])),_:2},1032,["icon","onClick"])):(0,l.kq)("",!0)])),_:2},1024)])),default:(0,l.w5)((()=>[(0,l.Wm)(d,{onClick:n=>e.handleEdit(t.row)},{default:(0,l.w5)((()=>[(0,l.Wm)(g)])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data","onRowClick"])])}var r=n(4870),c=n(9749),u=n(8045),g=n(9092),d=n(547),w=n(6854);const m=(0,l.aZ)({name:"Download"}),p={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},f=(0,l._)("path",{fill:"currentColor",d:"M160 832h704a32 32 0 110 64H160a32 32 0 110-64zm384-253.696l236.288-236.352 45.248 45.248L508.8 704 192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),h=[f];function D(e,t,n,o,a,i){return(0,l.wg)(),(0,l.iD)("svg",p,h)}var k=(0,w.Z)(m,[["render",D]]),_=n(2167),v=n(5478),C=(0,l.aZ)({components:{MoreFilled:g.Z},props:{songList:Array,show:{default:!1}},emits:["changeData"],setup(e){const{getSongTitle:t,getSingerName:n,playMusic:o,checkStatus:a,downloadMusic:i}=(0,u.Z)(),{proxy:s}=(0,l.FN)(),g=(0,c.oR)(),{songList:w}=(0,r.BK)(e),m=(0,r.qj)({dislike:v.JO.Dislike,like:v.JO.Like}),p=(0,l.Fl)((()=>g.getters.songUrl)),f=(0,l.Fl)((()=>g.getters.singerName)),h=(0,l.Fl)((()=>g.getters.songTitle)),D=(0,l.Fl)((()=>{const e=[];return w.value.forEach(((l,o)=>{l["songName"]=t(l.name),l["singerName"]=n(l.name),l["index"]=o,e.push(l)})),e}));function C(e){o({id:e.id,url:e.url,pic:e.pic,index:e.index,name:e.name,lyric:e.lyric,currentSongList:w.value})}function M(e){console.log("row",e)}const S=(0,l.Fl)((()=>g.getters.userId));async function x({id:e}){if(!a())return;const t=await _.x.deleteCollection(S.value,e);s.$message({message:t.message,type:t.type}),!1===t.data&&s.$emit("changeData",t.data)}return{dataList:D,iconList:m,Delete:d.Z,Download:k,songUrl:p,singerName:f,songTitle:h,handleClick:C,handleEdit:M,downloadMusic:i,deleteCollection:x}}}),M=n(89);const S=(0,M.Z)(C,[["render",s],["__scopeId","data-v-fd83827a"]]);var x=S},3929:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var l=n(3396),o=n(7139);const a=e=>((0,l.dD)("data-v-038d5159"),e=e(),(0,l.Cn)(),e),i={class:"album-info"},s=a((()=>(0,l._)("h2",null,"基本资料",-1))),r={key:0};function c(e,t,n,a,c,u){const g=(0,l.up)("el-image"),d=(0,l.up)("el-aside"),w=(0,l.up)("song-list"),m=(0,l.up)("el-main"),p=(0,l.up)("el-container");return(0,l.wg)(),(0,l.j4)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"album-slide"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"singer-img",fit:"contain",src:e.attachImageUrl(e.songDetails.pic)},null,8,["src"]),(0,l._)("div",i,[s,(0,l._)("ul",null,[2!==e.songDetails.sex?((0,l.wg)(),(0,l.iD)("li",r,"性别："+(0,o.zw)(e.getUserSex(e.songDetails.sex)),1)):(0,l.kq)("",!0),(0,l._)("li",null,"生日："+(0,o.zw)(e.getBirth(e.songDetails.birth)),1),(0,l._)("li",null,"故乡："+(0,o.zw)(e.songDetails.location),1)])])])),_:1}),(0,l.Wm)(m,{class:"album-main"},{default:(0,l.w5)((()=>[(0,l._)("h1",null,(0,o.zw)(e.songDetails.name),1),(0,l._)("p",null,(0,o.zw)(e.songDetails.introduction),1),(0,l.Wm)(w,{songList:e.currentSongList},null,8,["songList"])])),_:1})])),_:1})}var u=n(4870),g=n(9749),d=n(8045),w=n(8053),m=n(2167),p=n(2024),f=(0,l.aZ)({components:{SongList:w.Z},setup(){const e=(0,g.oR)(),{getUserSex:t}=(0,d.Z)(),n=(0,u.iH)([]),o=(0,l.Fl)((()=>e.getters.songDetails));return(0,l.bv)((async()=>{try{const e=await m.x.getSongOfSingerId(o.value.id);n.value=e.data}catch(e){console.error(e)}})),{songDetails:o,currentSongList:n,attachImageUrl:m.x.attachImageUrl,getBirth:p.oy,getUserSex:t}}}),h=n(89);const D=(0,h.Z)(f,[["render",c],["__scopeId","data-v-038d5159"]]);var k=D}}]);
//# sourceMappingURL=929.3afcbe2d.js.map